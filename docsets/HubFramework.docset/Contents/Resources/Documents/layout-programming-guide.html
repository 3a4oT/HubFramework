<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Layout programming guide  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>


    <a title="Layout programming guide  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          HubFramework Docs
        </a>
         (96% documented)
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://ghe.spotify.net/iOS/HubFramework">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://https%3A%2F%2Fghe%2Espotify%2Enet%2Fpages%2FiOS%2FHubFramework%2Fdocsets%2Ffeed%2Exml">
            <img class="header-icon" src="img/dash.png"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">HubFramework Reference</a>
      <img class="carat" src="img/carat.png" />
      Layout programming guide  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="component-programming-guide.html">Component programming guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="content-programming-guide.html">Content programming guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="json-programming-guide.html">JSON programming guide</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="layout-programming-guide.html">Layout programming guide</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/HUBComponentIdentifier.html">HUBComponentIdentifier</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/HUBManager.html">HUBManager</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/HUBViewURIPredicate.html">HUBViewURIPredicate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Constants.html">Constants</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentCategories.h@HUBComponentCategoryBanner">HUBComponentCategoryBanner</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentCategories.h@HUBComponentCategoryCard">HUBComponentCategoryCard</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentCategories.h@HUBComponentCategoryCarousel">HUBComponentCategoryCarousel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentCategories.h@HUBComponentCategoryHeader">HUBComponentCategoryHeader</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentCategories.h@HUBComponentCategoryRow">HUBComponentCategoryRow</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentLayoutTraits.h@HUBComponentLayoutTraitCompactWidth">HUBComponentLayoutTraitCompactWidth</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentLayoutTraits.h@HUBComponentLayoutTraitFullWidth">HUBComponentLayoutTraitFullWidth</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Constants.html#/c:HUBComponentLayoutTraits.h@HUBComponentLayoutTraitStackable">HUBComponentLayoutTraitStackable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HUBComponentImageStyle.html">HUBComponentImageStyle</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HUBComponentImageType.html">HUBComponentImageType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HUBComponentLayoutContentEdge.html">HUBComponentLayoutContentEdge</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/HUBConnectivityState.html">HUBConnectivityState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponent.html">HUBComponent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentChildDelegate.html">HUBComponentChildDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentContentOffsetObserver.html">HUBComponentContentOffsetObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentFactory.html">HUBComponentFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentFallbackHandler.html">HUBComponentFallbackHandler</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentImageData.html">HUBComponentImageData</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentImageDataBuilder.html">HUBComponentImageDataBuilder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentImageDataJSONSchema.html">HUBComponentImageDataJSONSchema</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentLayoutManager.html">HUBComponentLayoutManager</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentModel.html">HUBComponentModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentModelBuilder.html">HUBComponentModelBuilder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentModelJSONSchema.html">HUBComponentModelJSONSchema</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentRegistry.html">HUBComponentRegistry</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentSelectionContext.html">HUBComponentSelectionContext</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentSelectionHandler.html">HUBComponentSelectionHandler</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentViewObserver.html">HUBComponentViewObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentWithChildren.html">HUBComponentWithChildren</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentWithImageHandling.html">HUBComponentWithImageHandling</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBComponentWithRestorableUIState.html">HUBComponentWithRestorableUIState</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBConnectivityStateResolver.html">HUBConnectivityStateResolver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBConnectivityStateResolverObserver.html">HUBConnectivityStateResolverObserver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperation.html">HUBContentOperation</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperationDelegate.html">HUBContentOperationDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperationFactory.html">HUBContentOperationFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentOperationWithInitialContent.html">HUBContentOperationWithInitialContent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBContentReloadPolicy.html">HUBContentReloadPolicy</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBFeatureInfo.html">HUBFeatureInfo</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBFeatureRegistry.html">HUBFeatureRegistry</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBIcon.html">HUBIcon</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBIconImageResolver.html">HUBIconImageResolver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBImageLoader.html">HUBImageLoader</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBImageLoaderDelegate.html">HUBImageLoaderDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBImageLoaderFactory.html">HUBImageLoaderFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONBoolPath.html">HUBJSONBoolPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONDatePath.html">HUBJSONDatePath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONDictionaryPath.html">HUBJSONDictionaryPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONIntegerPath.html">HUBJSONIntegerPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONPath.html">HUBJSONPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONSchema.html">HUBJSONSchema</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONSchemaRegistry.html">HUBJSONSchemaRegistry</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONStringPath.html">HUBJSONStringPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBJSONURLPath.html">HUBJSONURLPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBMutableJSONPath.html">HUBMutableJSONPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBSerializable.html">HUBSerializable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewController.html">HUBViewController</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewControllerDelegate.html">HUBViewControllerDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewControllerFactory.html">HUBViewControllerFactory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModel.html">HUBViewModel</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModelBuilder.html">HUBViewModelBuilder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModelJSONSchema.html">HUBViewModelJSONSchema</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModelLoader.html">HUBViewModelLoader</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModelLoaderDelegate.html">HUBViewModelLoaderDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/HUBViewModelLoaderFactory.html">HUBViewModelLoaderFactory</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Type Definitions.html">Type Definitions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Type Definitions.html#/c:HUBComponentCategories.h@T@HUBComponentCategory">HUBComponentCategory</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Type Definitions.html#/c:HUBComponentLayoutTraits.h@T@HUBComponentLayoutTrait">HUBComponentLayoutTrait</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Type Definitions.html#/c:HUBMutableJSONPath.h@T@HUBMutableJSONPathBlock">HUBMutableJSONPathBlock</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <a href='#layout-programming-guide' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='layout-programming-guide'>Layout Programming Guide</h1>

<p>Welcome to the Hub Framework layout programming guide! This guide aims to help you gain a deeper understanding of how the Hub Framework works in terms of layout.</p>

<p><strong>Table of contents</strong></p>

<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#layout-traits">Layout traits</a></li>
<li><a href="#layout-manager">Layout manager</a></li>
</ul>
<a href='#introduction' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='introduction'>Introduction</h2>

<p>In order to both support quick iteration &amp; development of components &amp; content, and also be able to ensure consistent layout behavior throughout an application, The Hub Framework uses a centralized layout system - that has information fed into it by components.</p>

<p>There are two key parts to the Hub Framework layout system; <strong>Layout traits</strong> and a <strong>Layout manager</strong>. Those two parts are then used together with <code>UICollectionView</code>, and a custom <code>UICollectionViewLayout</code>.</p>
<a href='#layout-traits' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='layout-traits'>Layout traits</h2>

<p>Each <code>HUBComponent</code> has the ability to declare a set of layout traits. These traits don&rsquo;t contain information about absolute margins or padding, but rather informs the framework&rsquo;s layout manager how to compute metrics.</p>

<p>The Hub Framework ships with a standard library of layout traits, but more can easily be added by applications using the framework (by declaring a new <code>HUBComponentLayoutTrait</code> constant). It&rsquo;s recommended to keep layout traits global in an application, to be able to create clearly defined rules around layout.</p>

<p>An example of a layout trait is <code>HUBComponentLayoutTraitCompactWidth</code>, which is used for components that should have horizontal margin on each side (and not stretch the entire view). The opposite of this trait is <code>HUBComponentLayoutTraitFullWidth</code>, which tells the layout manager that no horizontal margin should be added.</p>

<p>So layout traits are a way do describe layout, rather than specifying hard rules or metrics. The advantage of this approach is that components can be completely unaware of each other, while still being laid out in a predictable way.</p>
<a href='#layout-manager' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='layout-manager'>Layout manager</h2>

<p>The other key part of the Hub Framework layout system, is <code>HUBComponentLayoutManager</code>. Each instance of the framework has a single layout manager, that does all the computation of margins for components. To be able to make an informed decision, the layout manager is given access to the layout traits for the component(s) that it&rsquo;s computing margins for.</p>

<p>Let&rsquo;s make a simple implementation of <code>HUBComponentLayoutManager</code>, that uses a <code>15 point</code> vertical margin for all components (except for those with the <code>HUBComponentLayoutTraitStackable</code> trait) and a <code>20 point</code> horizontal margin (except for components with the <code>HUBComponentLayoutTraitFullWidth</code> trait):</p>
<pre class="highlight plaintext"><code>@implementation LayoutManager

- (CGFloat)marginBetweenComponentWithLayoutTraits:(NSSet&lt;HUBComponentLayoutTrait *&gt; *)layoutTraits
                                   andContentEdge:(HUBComponentLayoutContentEdge)contentEdge
{
    switch (contentEdge) {
        case HUBComponentLayoutContentEdgeTop:
        case HUBComponentLayoutContentEdgeBottom:
            return 15;
        case HUBComponentLayoutContentEdgeLeft:
        case HUBComponentLayoutContentEdgeRight: {
            if ([layoutTraits containsObject:HUBComponentLayoutTraitFullWidth]) {
                return 0;
            }

            return 20;
        }

    }
}

- (CGFloat)verticalMarginBetweenComponentWithLayoutTraits:(NSSet&lt;HUBComponentLayoutTrait *&gt; *)layoutTraits
                       andHeaderComponentWithLayoutTraits:(NSSet&lt;HUBComponentLayoutTrait *&gt; *)headerLayoutTraits
{
    if ([layoutTraits containsObject:HUBComponentLayoutTraitStackable]) {
        return 0;
    }

    return 15;
}

- (CGFloat)horizontalMarginForComponentWithLayoutTraits:(NSSet&lt;HUBComponentLayoutTrait *&gt; *)layoutTraits
                         precedingComponentLayoutTraits:(NSSet&lt;HUBComponentLayoutTrait *&gt; *)precedingComponentLayoutTraits
{
    if ([layoutTraits containsObject:HUBComponentLayoutTraitFullWidth]) {
        return 0;
    }

    return 20;
}

- (CGFloat)verticalMarginForComponentWithLayoutTraits:(NSSet&lt;HUBComponentLayoutTrait *&gt; *)layoutTraits
                       precedingComponentLayoutTraits:(NSSet&lt;HUBComponentLayoutTrait *&gt; *)precedingComponentLayoutTraits
{
    if ([layoutTraits containsObject:HUBComponentLayoutTraitStackable] &amp;&amp; [precedingComponentLayoutTraits containsObject:HUBComponentLayoutTraitStackable]) {
        return 0;
    }

    return 15;
}

@end
</code></pre>

<p>That&rsquo;s it! Now we&rsquo;ll get proper layout for all components using the above layout traits, and we can easily add new rules (in a central place) whenever new traits are introduced.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>Copyright © 2015-2016 Spotify AB</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.0</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
